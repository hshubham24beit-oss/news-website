{% extends "news/base.html" %}
{% load static %}
{% block title %}Home - Pillai's News{% endblock %}

{% block content %}
<div class="layout">
  <!-- left: main content -->
  <div>
    <div class="hero">
      <div class="hero-top">
        {% if news_list and news_list.0.image %}
          <img src="{{ news_list.0.image.url }}" class="hero-img" alt="">
        {% else %}
          <img src="{% static 'images/hero-placeholder.jpg' %}" class="hero-img" alt="">
        {% endif %}
        <div class="hero-content">
          {% if news_list %}
            <h1>{{ news_list.0.title }}</h1>
            <div class="meta">{{ news_list.0.created_at|date:"F j, Y" }}</div>
            <p style="color:var(--muted); margin-top:10px;">{{ news_list.0.content|truncatewords:30 }}</p>
            <a href="{% url 'news-detail' news_list.0.id %}" style="display:inline-block;margin-top:12px;font-weight:700;color:var(--brand);text-decoration:none;">Read more →</a>
          {% else %}
            <h1>Welcome to Pillai's News</h1>
            <p style="color:var(--muted)">No articles yet. Add some from the admin panel.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="section-title">Latest News</div>
    <div class="latest-grid">
      {% for n in news_list %}
        <a class="card-news" href="{% url 'news-detail' n.id %}">
          {% if n.image %}
            <img src="{{ n.image.url }}" alt="{{ n.title }}">
          {% else %}
            <img src="{% static 'images/card-placeholder.jpg' %}" alt="{{ n.title }}">
          {% endif %}
          <div class="card-body">
            <div class="card-title">{{ n.title|truncatechars:70 }}</div>
            <div class="card-meta">{{ n.created_at|date:"M d, Y" }} • {{ n.category.name }}</div>
          </div>
        </a>
      {% empty %}
        <p style="color:var(--muted)">No news available. Add items via the admin.</p>
      {% endfor %}
    </div>
  </div>

  <!-- right: sidebar -->
  <aside class="sidebar">
    <div class="card">
      <h4 style="margin:0 0 8px 0;">Trending</h4>
      <ul class="trending" style="padding-left:0; margin:0;">
        {% for t in news_list|slice:":4" %}
          <li><a href="{% url 'news-detail' t.id %}">{{ t.title|truncatechars:60 }}</a></li>
        {% empty %}
          <li style="color:var(--muted)">No trending articles.</li>
        {% endfor %}
      </ul>
    </div>

    <div class="card">
      <h4 style="margin:0 0 8px 0;">Weather</h4>
      <div style="display:flex;align-items:center;gap:12px">
        <img src="{% static 'images/sun.png' %}" alt="sun" width="48" style="display:block;">
        <div>
          <div style="font-weight:700">Sunny</div>
          <div style="color:var(--muted)">Pune · 29°C</div>
        </div>
      </div>
    </div>
  </aside>
</div>
{% endblock %}
