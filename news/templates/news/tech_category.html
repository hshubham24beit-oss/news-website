{% extends "news/base.html" %}
{% load static %}

{% block title %}
  {% if hero_title %}
    {{ hero_title }} — Pillai's News
  {% elif hero_article %}
    {{ hero_article.title }} — Pillai's News
  {% else %}
    {{ category.name }} — Pillai's News
  {% endif %}
{% endblock %}

{% block content %}
<style>
.tech-hero {
  position: relative;
  text-align: center;
  margin-top: 20px !important;
  padding-top: 20px !important;
}

.tech-hero img {
  width: 100%;
  max-height: 420px;
  object-fit: cover;
  border-radius: 8px;
  display: block;
}
.tech-hero .hero-title {
  color: #1a73e8; /* tech blue */
  font-size: 36px;
  font-weight: 700;
  margin: 15px 0;
  text-align: center;
  margin-top: 24px;
}
.container.category-body {
  max-width: 1000px;
  margin: 36px auto;
  padding: 0 12px;
  text-align: center;
}
.large-content {
  max-width: 100%;
  width: 100%;
  margin: 0 auto;
  padding: 10px 4%;
  text-align: justify;
  font-size: 18px;
  line-height: 1.8;
  color: #333;
  box-sizing: border-box;
}

.article-list {
  margin-top: 28px;
  text-align: left;
}
.article-card {
  padding: 14px 12px;
  border-radius: 8px;
  background: #fff;
  box-shadow: 0 6px 18px rgba(0,0,0,0.03);
  margin-bottom: 12px;
}
.article-card h3 {
  margin: 0 0 6px;
  font-size: 18px;
}
.article-meta {
  color: #666;
  font-size: 0.9rem;
  margin-bottom: 8px;
}
@media (min-width:900px) {
  .tech-hero .hero-title { font-size: 44px; }
}

/* Force hero and content stack vertically */
.tech-hero,
.large-content {
  display: block !important;
  width: 100% !important;
  margin-top: 60px;
}

main.container.main-grid {
  display: block !important;
  padding-top: 0 !important;
  margin-top: 0 !important;
}
</style>

<!-- HERO -->
<section class="tech-hero" aria-label="Hero">
  <img id="hero-img"
       src="{% if hero_image %}{{ hero_image }}{% elif hero_article and hero_article.image %}{{ hero_article.image.url }}{% else %}{% static 'images/tech-banner.jpg' %}{% endif %}"
       alt="{% if hero_title %}{{ hero_title }}{% elif hero_article %}{{ hero_article.title }}{% else %}{{ category.name }}{% endif %}">

  <h1 id="hero-title" class="hero-title">
    {% if hero_title %}
      {{ hero_title }}
    {% elif hero_article %}
      {{ hero_article.title }}
    {% else %}
      {{ category.name }}
    {% endif %}
  </h1>
</section>

<!-- MAIN CONTENT (tech category specific) -->
<div class="large-content">
  {% if category.id == 1 %}
    <!-- Gadgets & Devices -->
    <p><strong>By [Your Name] | October 2025</strong></p>
    <p>Exploring the latest smartphones, laptops, wearables, and other gadgets hitting the market. Reviews, comparisons, and user experiences help you stay ahead in the tech world.</p>
    <ul>
      <li>New device launches and specifications</li>
      <li>Hands-on reviews and expert opinions</li>
      <li>Upcoming tech trends in consumer electronics</li>
    </ul>

  {% elif category.id == 2 %}
    <!-- Artificial Intelligence (AI) -->
    <p><strong>By [Your Name] | October 2025</strong></p>
    <p>AI innovations shaping industries, from machine learning breakthroughs to ethical debates. Coverage includes major AI research, applications, and business adoption.</p>
    <ul>
      <li>AI research highlights</li>
      <li>Automation in industries and workplaces</li>
      <li>Ethical and social implications of AI</li>
    </ul>

  {% elif category.id == 3 %}
    <!-- Startups & Innovation -->
    <p><strong>By [Your Name] | October 2025</strong></p>
    <p>Insights into emerging tech startups, funding rounds, and entrepreneurial innovations. Discover which ventures are disrupting the market and shaping future technologies.</p>

  {% elif category.id == 4 %}
    <!-- Software & Apps -->
    <p><strong>By [Your Name] | October 2025</strong></p>
    <p>Updates on the latest software releases, apps, and productivity tools. Tips, reviews, and guides help users optimize workflows and leverage new technologies.</p>

  {% elif category.id == 5 %}
    <!-- Cybersecurity -->
    <p><strong>By [Your Name] | October 2025</strong></p>
    <p>Cybersecurity threats, best practices, and protective measures. Stay informed about vulnerabilities, hacks, and how companies safeguard digital assets.</p>

  {% elif category.id == 6 %}
    <!-- Internet & Social Media -->
    <p><strong>By [Your Name] | October 2025</strong></p>
    <p>Trends in social media platforms, digital marketing, and internet culture. Analysis of how online interactions and platforms influence society and business.</p>

  {% else %}
    <p>This section contains the latest updates from the tech world. Select a subcategory to read more.</p>
  {% endif %}

  <hr style="margin:26px 0; border:none; border-top:1px solid rgba(0,0,0,0.1);">

  <a href="{% url 'news:tech' %}" 
     class="back-link" 
     style="display:inline-block; color:var(--brand); font-weight:700; text-decoration:none; margin-top: 30px;">
    ← Back to tech
  </a>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  try {
    const serverHero = "{{ hero_image|default:'' }}";
    const serverTitle = "{{ hero_title|default:'' }}";

    if (!serverHero || serverHero.trim() === "") {
      const params = new URLSearchParams(window.location.search);
      let img = params.get('hero_image');
      let title = params.get('hero_title');

      if (img) {
        img = decodeURIComponent(img.replace(/\+/g, ' '));
        const heroImgEl = document.getElementById('hero-img');
        if (heroImgEl) heroImgEl.src = img;
      }

      if (title) {
        title = decodeURIComponent(title.replace(/\+/g, ' '));
        const heroTitleEl = document.getElementById('hero-title');
        if (heroTitleEl) heroTitleEl.textContent = title;
      }
    }
  } catch (e) {
    console.error('Hero fallback error:', e);
  }
});
</script>
{% endblock %}
